
{% extends "base.html" %}

{% block title %}로그인 - 테크창{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow-lg border-0" style="border-radius: 20px; background: #0f172a; color: #e2e8f0; border: 1px solid rgba(255,255,255,0.05);">
                <!-- 헤더 -->
                <div class="card-header text-white text-center py-4" style="border-radius: 20px 20px 0 0; background: linear-gradient(135deg, #0ea5e9 0%, #0ea5e9 100%); color: #0b1220;">
                    <i class="fas fa-sign-in-alt fa-3x mb-3"></i>
                    <h2 class="mb-1">로그인</h2>
                    <p class="mb-0" style="color: #0b1220; opacity: 0.9;">테크창 커뮤니티에 오신 것을 환영합니다</p>
                </div>
                
                <!-- 본문 -->
                <div class="card-body p-5">
                    <!-- 카카오 로그인 (메인) -->
                    <div class="mb-4">
                        <div class="d-grid">
                            <a href="{% url 'common:kakao_login' %}" class="btn btn-warning btn-lg d-flex align-items-center justify-content-center" style="border-radius: 10px; background-color: #FEE500; border-color: #FEE500; color: #000000;">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000000'%3E%3Cpath d='M12 3c5.799 0 10.5 3.664 10.5 8.185 0 4.52-4.701 8.184-10.5 8.184a13.5 13.5 0 0 1-1.727-.11l-4.408 2.883c-.501.265-.678.236-.472-.413l.892-3.678c-2.88-1.46-4.785-3.99-4.785-6.866C1.5 6.665 6.201 3 12 3Z'/%3E%3C/svg%3E" alt="Kakao" style="width: 24px; height: 24px; margin-right: 12px;">
                                <span style="font-weight: 600; font-size: 16px;">카카오 로그인</span>
                            </a>
                        </div>
                        <p class="text-center small mt-3 mb-0" style="color: #cbd5e0;">
                            <i class="fas fa-info-circle me-1"></i>
                            카카오 계정으로 간편하게 로그인하세요
                        </p>
                    </div>

                    <!-- 구분선 -->
                    <div class="position-relative my-4">
                        <hr style="border-top: 1px solid rgba(255,255,255,0.08);">
                        <span class="position-absolute top-50 start-50 translate-middle px-3 small" style="background: #0f172a; color: #cbd5e0;">
                            일반/관리자 로그인
                        </span>
                    </div>

                    <!-- 일반/관리자 로그인 (접을 수 있는 형태) -->
                    <div class="accordion" id="adminLoginAccordion">
                        <div class="accordion-item border-0">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#adminLoginForm" style="border-radius: 10px; background: rgba(255,255,255,0.04); color: #e2e8f0; border: 1px solid rgba(255,255,255,0.08);">
                                    <i class="fas fa-user-shield me-2"></i>
                                    일반/관리자 로그인 (ID/PW)
                                </button>
                            </h2>
                            <div id="adminLoginForm" class="accordion-collapse collapse" data-bs-parent="#adminLoginAccordion">
                                <div class="accordion-body" style="background: rgba(255,255,255,0.02); color: #e2e8f0;">
                                    <form method="post" action="{% url 'common:login' %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="next" value="{{ next }}">

                                        <!-- 에러 메시지 -->
                                        {% if form.errors %}
                                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                            <i class="fas fa-exclamation-triangle me-2"></i>
                                            <strong>로그인 실패!</strong>
                                            <ul class="mb-0 mt-2">
                                                {% for field in form %}
                                                    {% for error in field.errors %}
                                                        <li>{{ error }}</li>
                                                    {% endfor %}
                                                {% endfor %}
                                                {% for error in form.non_field_errors %}
                                                    <li>{{ error }}</li>
                                                {% endfor %}
                                            </ul>
                                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                        </div>
                                        {% endif %}

                                        <!-- 사용자명 입력 -->
                                        <div class="mb-3">
                                            <label for="username" class="form-label fw-semibold small">
                                                <i class="fas fa-user me-2" style="color:#38bdf8;"></i>사용자 이름
                                            </label>
                                            <div class="input-group">
                                                <span class="input-group-text border-end-0" style="background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.08); color: #cbd5e0;">
                                                    <i class="fas fa-user"></i>
                                                </span>
                                                <input type="text"
                                                       class="form-control border-start-0 ps-0"
                                                       name="username"
                                                       id="username"
                                                       value="{{ form.username.value|default_if_none:'' }}"
                                                       placeholder="관리자 계정"
                                                       style="border-radius: 0 8px 8px 0; background: rgba(255,255,255,0.04); color: #e5e7eb; border-color: rgba(255,255,255,0.08);"
                                                       required>
                                            </div>
                                        </div>

                                        <!-- 비밀번호 입력 -->
                                        <div class="mb-3">
                                            <label for="password" class="form-label fw-semibold small">
                                                <i class="fas fa-lock me-2" style="color:#38bdf8;"></i>비밀번호
                                            </label>
                                            <div class="input-group">
                                                <span class="input-group-text border-end-0" style="background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.08); color: #cbd5e0;">
                                                    <i class="fas fa-lock"></i>
                                                </span>
                                                <input type="password"
                                                       class="form-control border-start-0 ps-0"
                                                       name="password"
                                                       id="password"
                                                       placeholder="비밀번호"
                                                       style="border-radius: 0 8px 8px 0; background: rgba(255,255,255,0.04); color: #e5e7eb; border-color: rgba(255,255,255,0.08);"
                                                       required>
                                            </div>
                                        </div>

                                        <!-- 로그인 버튼 -->
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary" style="border-radius: 8px;">
                                                <i class="fas fa-sign-in-alt me-2"></i>로그인
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 회원가입 링크 -->
                    <div class="text-center mt-4">
                        <p class="mb-2 small" style="color:#cbd5e0;">일반 계정으로 가입하시겠어요?</p>
                        <a href="{% url 'common:signup' %}" class="btn btn-outline-secondary btn-sm" style="border-radius: 8px; color:#e5e7eb; border-color: rgba(255,255,255,0.1);">
                            <i class="fas fa-user-plus me-2"></i>회원가입하기
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- 하단 정보 -->
            <div class="text-center mt-4">
                <p class="small" style="color:#94a3b8;">
                    <i class="fas fa-shield-alt me-1"></i>
                    안전하고 신뢰할 수 있는 테크창 커뮤니티
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
