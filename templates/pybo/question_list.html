{% extends 'base.html' %}
{% load pybo_filter %}
{% load static %}

{% block extra_css %}
<link href="{% static 'css/reborn.css' %}?v={{ 'now'|date:'YmdHis' }}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Hero Section - 3D Interactive Dark Design -->
<section class="hero-section" style="
    position: relative;
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #0f1419 0%, #1a202c 50%, #2d3748 100%);
    overflow: hidden;
    padding: 4rem 2rem;
">
    <!-- 3D Background Orbs -->
    <div class="orb primary" style="
        position: absolute;
        width: 500px;
        height: 500px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(8, 145, 178, 0.3) 0%, transparent 70%);
        filter: blur(60px);
        top: -200px;
        left: -100px;
        animation: float 20s ease-in-out infinite;
    "></div>
    <div class="orb secondary" style="
        position: absolute;
        width: 400px;
        height: 400px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(74, 85, 104, 0.2) 0%, transparent 70%);
        filter: blur(50px);
        bottom: -150px;
        right: -50px;
        animation: float 18s ease-in-out infinite reverse;
    "></div>

    <div class="hero-content fade-in" style="position: relative; z-index: 2; max-width: 1200px; width: 100%;">
        <!-- Badge -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <span style="
                display: inline-block;
                padding: 0.75rem 1.5rem;
                background: rgba(255, 255, 255, 0.08);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 999px;
                color: #f7fafc;
                font-weight: 600;
                backdrop-filter: blur(5px);
                font-size: 0.95rem;
                letter-spacing: 0.5px;
            ">ğŸš€ HRD Ã— Technology Ã— Innovation</span>
        </div>

        <!-- Main Title -->
        <h1 class="fade-in" style="
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 900;
            text-align: center;
            background: linear-gradient(135deg, #ffffff 0%, #cbd5e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            line-height: 1.1;
            letter-spacing: -2px;
        ">í…Œí¬ì°½</h1>

        <h2 class="fade-in stagger-1" style="
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            font-weight: 700;
            text-align: center;
            color: #0891b2;
            margin-bottom: 2rem;
        ">ì§€ì‹ì´ ì„±ì¥í•˜ëŠ” ì°½ì¡°ì  ê³µê°„</h2>

        <!-- Description -->
        <p class="fade-in stagger-2" style="
            font-size: 1.25rem;
            line-height: 1.8;
            color: #e2e8f0;
            max-width: 700px;
            margin: 0 auto 3rem;
            text-align: center;
        ">
            ë°ì´í„° ë¶„ì„ë¶€í„° í”„ë¡œê·¸ë˜ë°ê¹Œì§€, AI ì‹œëŒ€ì˜ ì¸ì¬ê°œë°œ í˜ì‹ ì„ í•¨ê»˜ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.
        </p>

        <!-- CTA Buttons -->
        <div class="fade-in stagger-3" style="
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
        ">
            {% if user.is_authenticated %}
                <a href="{% url 'pybo:question_create' %}" class="btn-primary magnet-btn" style="
                    padding: 1rem 2rem;
                    font-size: 1.1rem;
                    font-weight: 700;
                    border-radius: 0.75rem;
                    background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
                    color: #ffffff;
                    text-decoration: none;
                    box-shadow: 0 10px 30px rgba(8, 145, 178, 0.5);
                    transition: all 0.3s ease;
                ">âœï¸ ê²Œì‹œê¸€ ì‘ì„±</a>
                <a href="{% url 'pybo:games_index' %}" class="btn-secondary magnet-btn" style="
                    padding: 1rem 2rem;
                    font-size: 1.1rem;
                    font-weight: 700;
                    border-radius: 0.75rem;
                    background: rgba(255, 255, 255, 0.2);
                    color: #ffffff;
                    text-decoration: none;
                    border: 2px solid rgba(255, 255, 255, 0.4);
                    backdrop-filter: blur(5px);
                    transition: all 0.3s ease;
                ">ğŸ® ê²Œì„ ì„¼í„°</a>
            {% else %}
                <a href="{% url 'common:login' %}" class="btn-primary magnet-btn" style="
                    padding: 1rem 2rem;
                    font-size: 1.1rem;
                    font-weight: 700;
                    border-radius: 0.75rem;
                    background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
                    color: #ffffff;
                    text-decoration: none;
                    box-shadow: 0 10px 30px rgba(8, 145, 178, 0.5);
                    transition: all 0.3s ease;
                ">ğŸš€ ì‹œì‘í•˜ê¸°</a>
                <a href="{% url 'common:signup' %}" class="btn-secondary magnet-btn" style="
                    padding: 1rem 2rem;
                    font-size: 1.1rem;
                    font-weight: 700;
                    border-radius: 0.75rem;
                    background: rgba(255, 255, 255, 0.2);
                    color: #ffffff;
                    text-decoration: none;
                    border: 2px solid rgba(255, 255, 255, 0.4);
                    backdrop-filter: blur(5px);
                    transition: all 0.3s ease;
                ">ğŸ“ íšŒì›ê°€ì…</a>
            {% endif %}
        </div>

        <!-- Stats Cards -->
        <div class="fade-in stagger-4" style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            max-width: 900px;
            margin: 0 auto;
        ">
            <div class="stat-card" style="
                padding: 2rem;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 1.5rem;
                text-align: center;
                backdrop-filter: blur(5px);
                transition: all 0.3s ease;
            ">
                <div style="
                    font-size: 3rem;
                    font-weight: 900;
                    background: linear-gradient(135deg, #f7fafc, #cbd5e0);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                ">{{ total_count }}</div>
                <div style="
                    font-size: 0.9rem;
                    font-weight: 700;
                    text-transform: uppercase;
                    color: #a0aec0;
                    letter-spacing: 1px;
                    margin-top: 0.5rem;
                ">ê²Œì‹œê¸€</div>
            </div>
            <div class="stat-card" style="
                padding: 2rem;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 1.5rem;
                text-align: center;
                backdrop-filter: blur(5px);
                transition: all 0.3s ease;
            ">
                <div style="
                    font-size: 3rem;
                    font-weight: 900;
                    background: linear-gradient(135deg, #f7fafc, #cbd5e0);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                ">{{ categories|length }}</div>
                <div style="
                    font-size: 0.9rem;
                    font-weight: 700;
                    text-transform: uppercase;
                    color: #a0aec0;
                    letter-spacing: 1px;
                    margin-top: 0.5rem;
                ">ì¹´í…Œê³ ë¦¬</div>
            </div>
            <div class="stat-card" style="
                padding: 2rem;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 1.5rem;
                text-align: center;
                backdrop-filter: blur(5px);
                transition: all 0.3s ease;
            ">
                <div style="
                    font-size: 3rem;
                    font-weight: 900;
                    color: {% if user.is_authenticated %}#10b981{% else %}#f59e0b{% endif %};
                ">{% if user.is_authenticated %}ON{% else %}OFF{% endif %}</div>
                <div style="
                    font-size: 0.9rem;
                    font-weight: 700;
                    text-transform: uppercase;
                    color: #a0aec0;
                    letter-spacing: 1px;
                    margin-top: 0.5rem;
                ">ìƒíƒœ</div>
            </div>
        </div>

        <!-- Interactive Target Design -->
        <div id="target-container" style="
            position: absolute;
            bottom: 10%;
            right: 8%;
            width: 400px;
            height: 400px;
            pointer-events: none;
            z-index: 1;
            opacity: 0.9;
        ">
            <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%; filter: drop-shadow(0 20px 60px rgba(0,0,0,0.5));">
                <defs>
                    <radialGradient id="targetGradient1" cx="50%" cy="50%">
                        <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
                        <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:0.85" />
                    </radialGradient>
                    <radialGradient id="targetGradient2" cx="50%" cy="50%">
                        <stop offset="0%" style="stop-color:#f472b6;stop-opacity:0.9" />
                        <stop offset="100%" style="stop-color:#ec4899;stop-opacity:0.7" />
                    </radialGradient>
                    <radialGradient id="targetGradient3" cx="50%" cy="50%">
                        <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0.9" />
                        <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.7" />
                    </radialGradient>
                    <radialGradient id="targetCenter" cx="50%" cy="50%">
                        <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
                        <stop offset="70%" style="stop-color:#f59e0b;stop-opacity:0.9" />
                        <stop offset="100%" style="stop-color:#d97706;stop-opacity:0.8" />
                    </radialGradient>
                    <linearGradient id="dartGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0891b2;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                    </linearGradient>
                </defs>

                <!-- Outer circles with animation -->
                <circle cx="200" cy="200" r="180" fill="url(#targetGradient1)" opacity="0.3">
                    <animate attributeName="r" values="180;185;180" dur="4s" repeatCount="indefinite"/>
                </circle>
                <circle cx="200" cy="200" r="140" fill="url(#targetGradient2)" opacity="0.4">
                    <animate attributeName="r" values="140;145;140" dur="3.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="200" cy="200" r="100" fill="url(#targetGradient3)" opacity="0.5">
                    <animate attributeName="r" values="100;105;100" dur="3s" repeatCount="indefinite"/>
                </circle>
                <circle cx="200" cy="200" r="60" fill="url(#targetCenter)" opacity="0.8">
                    <animate attributeName="r" values="60;65;60" dur="2.5s" repeatCount="indefinite"/>
                </circle>

                <!-- Dart/Arrow -->
                <g id="dart" transform="translate(200, 200)">
                    <!-- Arrow body -->
                    <path d="M -5,-80 L 0,-100 L 5,-80 Z" fill="url(#dartGradient)" stroke="#0891b2" stroke-width="1">
                        <animateTransform attributeName="transform" type="rotate" values="0;5;-5;0" dur="2s" repeatCount="indefinite"/>
                    </path>
                    <rect x="-2" y="-80" width="4" height="80" fill="url(#dartGradient)"/>
                    <path d="M -8,0 L -2,0 L -2,-5 Z" fill="#f59e0b" opacity="0.8"/>
                    <path d="M 8,0 L 2,0 L 2,-5 Z" fill="#f59e0b" opacity="0.8"/>
                    <circle cx="0" cy="2" r="4" fill="#0891b2" opacity="0.9"/>
                </g>

                <!-- Accent rings -->
                <circle cx="200" cy="200" r="180" fill="none" stroke="rgba(255, 255, 255, 0.2)" stroke-width="2"/>
                <circle cx="200" cy="200" r="140" fill="none" stroke="rgba(255, 255, 255, 0.2)" stroke-width="2"/>
                <circle cx="200" cy="200" r="100" fill="none" stroke="rgba(255, 255, 255, 0.2)" stroke-width="2"/>
                <circle cx="200" cy="200" r="60" fill="none" stroke="rgba(255, 255, 255, 0.3)" stroke-width="2"/>
            </svg>
        </div>
    </div>
</section>

<style>
@keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(30px, -30px) scale(1.1); }
}

#target-container {
    animation: float 20s ease-in-out infinite;
}
</style>

<!-- Categories Section - ë‹¤í¬ í…Œë§ˆ -->
<section class="section" style="
    padding-top: 3rem;
    padding-bottom: 3rem;
    background: linear-gradient(180deg, #1a202c 0%, #2d3748 100%);
">
    <div class="container-wide">
        <h2 class="section-title" style="
            font-size: 1.8rem;
            margin-bottom: 2rem;
            color: #f7fafc;
            font-weight: 700;
        ">ì¹´í…Œê³ ë¦¬</h2>

        <div class="category-scroll">
            <a href="?page=1" class="category-pill {% if not category %}active{% endif %}">
                ğŸŒ ì „ì²´ ({{ total_count }})
            </a>

            {% for cat in categories %}
            <a href="?category={{ cat.name }}&page=1" class="category-pill {% if category == cat.name %}active{% endif %}">
                {{ cat.name }} {% if category == cat.name %}({{ category_counts|get_item:cat.name }}){% endif %}
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Content Section - Bento Grid ë‹¤í¬ í…Œë§ˆ -->
<section class="section" style="
    background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
    padding: 4rem 2rem;
">
    <div class="container-wide">
        <h2 class="section-title" style="
            font-size: 2rem;
            margin-bottom: 3rem;
            color: #f7fafc;
            font-weight: 800;
        ">ìµœì‹  ì½˜í…ì¸ </h2>

        <div class="bento-container">
            <!-- Featured Post -->
            {% if question_list.0 %}
            <div class="bento-featured fade-in">
                <span class="badge badge-featured">Featured</span>
                <h3 style="font-size: 2rem; font-weight: 800; margin: var(--space-4) 0; line-height: 1.2;">
                    <a href="{% url 'pybo:detail' question_list.0.id %}" style="color: var(--text-primary); text-decoration: none;">
                        {{ question_list.0.subject }}
                    </a>
                </h3>
                <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: var(--space-6);">
                    {{ question_list.0.content|striptags|truncatewords:30 }}
                </p>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.875rem; color: var(--text-tertiary);">
                    <div style="display: flex; gap: var(--space-3);">
                        <span>â¤ï¸ {{ question_list.0.voter.count }}</span>
                        <span>ğŸ’¬ {{ question_list.0.answer_set.count }}</span>
                    </div>
                    <span>{{ question_list.0.create_date|date:"m-d H:i" }}</span>
                </div>
            </div>
            {% endif %}

            <!-- Regular Posts -->
            {% for question in question_list|slice:"1:13" %}
            <div class="bento-item fade-in stagger-{{ forloop.counter }}">
                {% if question.category %}
                <span class="badge">{{ question.category.name }}</span>
                {% endif %}
                <h3 style="font-size: 1.25rem; font-weight: 700; margin: var(--space-3) 0; line-height: 1.3;">
                    <a href="{% url 'pybo:detail' question.id %}" style="color: var(--text-primary); text-decoration: none;">
                        {{ question.subject|truncatewords:12 }}
                    </a>
                </h3>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.875rem; color: var(--text-tertiary); margin-top: auto;">
                    <span>â¤ï¸ {{ question.voter.count }} ğŸ’¬ {{ question.answer_set.count }}</span>
                    <span>{{ question.create_date|date:"m-d" }}</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if question_list.has_other_pages %}
        <div style="display: flex; justify-content: center; gap: var(--space-2); margin-top: var(--space-12);">
            {% if question_list.has_previous %}
                <a href="?page=1{% if category %}&category={{ category }}{% endif %}{% if kw %}&kw={{ kw }}{% endif %}" class="btn-secondary" style="padding: var(--space-3) var(--space-4);">Â«</a>
                <a href="?page={{ question_list.previous_page_number }}{% if category %}&category={{ category }}{% endif %}{% if kw %}&kw={{ kw }}{% endif %}" class="btn-secondary" style="padding: var(--space-3) var(--space-4);">â€¹</a>
            {% endif %}

            <span class="btn-primary" style="padding: var(--space-3) var(--space-5);">
                {{ question_list.number }}
            </span>

            {% if question_list.has_next %}
                <a href="?page={{ question_list.next_page_number }}{% if category %}&category={{ category }}{% endif %}{% if kw %}&kw={{ kw }}{% endif %}" class="btn-secondary" style="padding: var(--space-3) var(--space-4);">â€º</a>
                <a href="?page={{ question_list.paginator.num_pages }}{% if category %}&category={{ category }}{% endif %}{% if kw %}&kw={{ kw }}{% endif %}" class="btn-secondary" style="padding: var(--space-3) var(--space-4);">Â»</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Search Form (Hidden) -->
<form id="searchForm" method="get" action="{% url 'pybo:index' %}" style="display: none;">
    <input type="hidden" id="kw" name="kw" value="{{ kw|default_if_none:'' }}">
    <input type="hidden" id="page" name="page" value="{{ page }}">
    <input type="hidden" id="sort" name="sort" value="{{ sort }}">
    <input type="hidden" id="category" name="category" value="{{ category }}">
</form>

{% endblock %}

{% block script %}
<script>
// ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth'
            });
        }
    });
});
</script>
{% endblock %}
