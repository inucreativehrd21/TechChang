{% extends 'base.html' %}
{% load static %}
{% load pybo_filter %}

{% block title %}ê²Œì„ ì„¼í„° - TechChang Games{% endblock %}

{% block extra_css %}
<link href="{% static 'css/reborn.css' %}?v={{ 'now'|date:'YmdHis' }}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Hero Section - Clean & Professional -->
<section class="hero-section">
    <!-- ë¯¸ë¬˜í•œ ë°°ê²½ ì¥ì‹ -->
    <div class="bg-decoration">
        <div class="bg-blob bg-blob-1"></div>
        <div class="bg-blob bg-blob-2"></div>
    </div>

    <div class="hero-content fade-in">
        <!-- Badge -->
        <div style="text-align: center; margin-bottom: var(--space-4);">
            <span class="badge badge-featured">ğŸ® PLAY & WIN</span>
        </div>

        <!-- Main Title -->
        <h1 class="display-mega text-center">ê²Œì„ ì„¼í„°</h1>
        <p class="fade-in stagger-2" style="
            font-size: 1.25rem;
            line-height: 1.8;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto var(--space-8);
            text-align: center;
        ">
            ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´ë¶€í„° í¼ì¦ê¹Œì§€,<br>
            ë‹¤ì–‘í•œ ê²Œì„ìœ¼ë¡œ ì‹¤ë ¥ì„ ê²¨ë¤„ë³´ì„¸ìš”
        </p>

        <!-- Stats Cards -->
        <div class="stats-grid fade-in stagger-3" style="max-width: 600px; margin: 0 auto;">
            <div class="stat-card">
                <div class="stat-value">{{ recent_stats.total_games_played }}</div>
                <div class="stat-label">Total Games</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{% if user.is_authenticated %}ON{% else %}OFF{% endif %}</div>
                <div class="stat-label">Status</div>
            </div>
        </div>
    </div>
</section>

<!-- Games Grid Section -->
<section class="section" style="background: var(--bg-secondary);">
    <div class="container-wide">
        <h2 class="section-title">ëª¨ë“  ê²Œì„</h2>

        <div class="bento-container">
            {% for game in games_info %}
            {% if forloop.first %}
            <!-- Featured Game -->
            <div class="bento-featured fade-in">
                <div style="text-align: center; margin-bottom: var(--space-4);">
                    <div style="font-size: 5rem;">{{ game.icon }}</div>
                </div>
                <h3 style="font-size: 2rem; font-weight: 800; text-align: center; margin-bottom: var(--space-3); color: var(--text-primary);">
                    {{ game.name }}
                </h3>
                <p style="font-size: 1rem; color: var(--text-secondary); text-align: center; margin-bottom: var(--space-6);">
                    {{ game.description }}
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-3); margin-bottom: var(--space-6);">
                    <div class="stat-card">
                        <div class="stat-value" style="font-size: 2rem;">{{ game.total_games }}</div>
                        <div class="stat-label">ì´ ê²Œì„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="font-size: 2rem;">{{ game.active_games }}</div>
                        <div class="stat-label">ì§„í–‰ ì¤‘</div>
                    </div>
                </div>

                <a href="{% url game.url %}" class="btn-primary" style="width: 100%; justify-content: center; font-size: 1.125rem;">
                    í”Œë ˆì´ í•˜ê¸° â–¶
                </a>
            </div>
            {% else %}
            <!-- Regular Games -->
            <div class="bento-item fade-in stagger-{{ forloop.counter }}">
                <div style="text-align: center; margin-bottom: var(--space-3);">
                    <div style="font-size: 3rem;">{{ game.icon }}</div>
                </div>
                <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: var(--space-2); color: var(--text-primary);">
                    {{ game.name }}
                </h3>
                <p style="font-size: 0.875rem; color: var(--text-tertiary); text-transform: uppercase; margin-bottom: var(--space-3);">
                    {{ game.title }}
                </p>
                <p style="font-size: 0.9rem; line-height: 1.6; color: var(--text-secondary); margin-bottom: var(--space-4);">
                    {{ game.description|truncatewords:15 }}
                </p>

                <div style="display: flex; gap: var(--space-3); margin-bottom: var(--space-4); font-size: 0.875rem; color: var(--text-tertiary);">
                    <span>ğŸ¯ {{ game.total_games }}</span>
                    <span>ğŸ”¥ {{ game.active_games }}</span>
                </div>

                <a href="{% url game.url %}" class="btn-secondary" style="width: 100%; justify-content: center;">
                    í”Œë ˆì´ â–¶
                </a>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="section" style="background: var(--bg-primary);">
    <div class="container-wide">
        <h2 class="section-title">ê²Œì„ íŠ¹ì§•</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-6); max-width: 1200px; margin: 0 auto;">
            <div class="card-clean fade-in stagger-1" style="text-align: center;">
                <div style="font-size: 4rem; margin-bottom: var(--space-4);">âš¡</div>
                <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: var(--space-3); color: var(--text-primary);">ì‹¤ì‹œê°„ ê²Œì„</h3>
                <p style="line-height: 1.6; color: var(--text-secondary);">
                    WebSocket ê¸°ìˆ ë¡œ êµ¬í˜„ëœ ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„. ëë§ì‡ê¸°ì™€ í‹±íƒí† ì—ì„œ ë‹¤ë¥¸ í”Œë ˆì´ì–´ì™€ ì¦‰ì‹œ ëŒ€ê²°í•˜ì„¸ìš”!
                </p>
            </div>

            <div class="card-clean fade-in stagger-2" style="text-align: center;">
                <div style="font-size: 4rem; margin-bottom: var(--space-4);">ğŸ¯</div>
                <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: var(--space-3); color: var(--text-primary);">ì‹±ê¸€ í”Œë ˆì´</h3>
                <p style="line-height: 1.6; color: var(--text-secondary);">
                    ìˆ«ìì•¼êµ¬, 2048, ì§€ë¢°ì°¾ê¸° ë“± í˜¼ìì„œë„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” í¼ì¦ ê²Œì„. ìì‹ ì˜ ìµœê³  ê¸°ë¡ì— ë„ì „í•˜ì„¸ìš”!
                </p>
            </div>

            <div class="card-clean fade-in stagger-3" style="text-align: center;">
                <div style="font-size: 4rem; margin-bottom: var(--space-4);">ğŸ†</div>
                <h3 style="font-size: 1.5rem; font-weight: 800; margin-bottom: var(--space-3); color: var(--text-primary);">ë¦¬ë”ë³´ë“œ</h3>
                <p style="line-height: 1.6; color: var(--text-secondary);">
                    ì „ì²´ í”Œë ˆì´ì–´ì™€ ì ìˆ˜ë¥¼ ë¹„êµí•˜ê³  ë­í‚¹ì— ë„ì „í•˜ì„¸ìš”. ìµœê³  ì ìˆ˜ë¥¼ ë‹¬ì„±í•˜ê³  ëª…ì˜ˆì˜ ì „ë‹¹ì— ì´ë¦„ì„ ì˜¬ë ¤ë³´ì„¸ìš”!
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Login CTA (if not authenticated) -->
{% if not user.is_authenticated %}
<section class="section" style="background: var(--bg-secondary);">
    <div class="container-wide">
        <div class="card-featured fade-in" style="
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        ">
            <div style="font-size: 5rem; margin-bottom: var(--space-6);">ğŸ””</div>
            <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: var(--space-4); color: var(--text-primary);">
                ë¡œê·¸ì¸í•˜ê³  ê²Œì„ ì‹œì‘!
            </h2>
            <p style="font-size: 1.125rem; color: var(--text-secondary); margin-bottom: var(--space-8);">
                ê²Œì„ì„ í”Œë ˆì´í•˜ê³  ì ìˆ˜ë¥¼ ê¸°ë¡í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤
            </p>
            <div style="display: flex; gap: var(--space-4); justify-content: center; flex-wrap: wrap;">
                <a href="{% url 'common:login' %}" class="btn-primary">
                    ë¡œê·¸ì¸
                </a>
                <a href="{% url 'common:signup' %}" class="btn-secondary">
                    íšŒì›ê°€ì…
                </a>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block script %}
<script>
// ì¹´ë“œ í˜¸ë²„ íš¨ê³¼
document.querySelectorAll('.bento-item, .card-clean').forEach(card => {
    card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-4px)';
    });
    card.addEventListener('mouseleave', () => {
        card.style.transform = 'translateY(0)';
    });
});
</script>
{% endblock %}
