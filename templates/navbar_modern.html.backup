{% load common_tags %}
{% load static %}

<!-- Modern Navigation -->
<nav class="modern-nav">
    <div class="container">
        <div class="modern-nav-inner">
            <!-- Brand -->
            <a class="modern-nav-brand" href="{% url 'community:index' %}">
                <img src="{% static 'images/techwindow-logo.png' %}" alt="테크창" style="height: 28px; width: auto;">
                <span>테크창</span>
            </a>

            <!-- Desktop Links -->
            <div class="modern-nav-links d-none d-lg-flex">
                <a href="{% url 'community:index' %}" class="modern-nav-link">홈</a>
                <a href="{% url 'community:games_index' %}" class="modern-nav-link">게임</a>
                <a href="{% url 'community:guestbook_list' %}" class="modern-nav-link">방명록</a>

                {% if user.is_authenticated %}
                    <a href="{% url 'community:question_create' %}" class="btn-modern btn-primary-modern" style="margin-left: var(--space-4);">
                        글쓰기
                    </a>
                    <div style="position: relative;" class="dropdown">
                        <button class="btn-modern btn-ghost" style="display: flex; align-items: center; gap: var(--space-2);">
                            {{ user|display_name }}
                        </button>
                        <div class="dropdown-menu" style="position: absolute; right: 0; top: 100%; margin-top: var(--space-2); background: white; border: 1px solid var(--border-color); border-radius: var(--radius-md); box-shadow: var(--shadow-lg); min-width: 200px; display: none;">
                            <a href="{% url 'community:profile' user.username %}" style="display: block; padding: var(--space-3) var(--space-4); color: var(--text-primary); text-decoration: none;">프로필</a>
                            <a href="{% url 'common:logout' %}" style="display: block; padding: var(--space-3) var(--space-4); color: var(--text-primary); text-decoration: none;">로그아웃</a>
                        </div>
                    </div>
                {% else %}
                    <a href="{% url 'common:login' %}" class="modern-nav-link">로그인</a>
                    <a href="{% url 'common:signup' %}" class="btn-modern btn-primary-modern" style="margin-left: var(--space-2);">
                        회원가입
                    </a>
                {% endif %}
            </div>

            <!-- Mobile Menu Button -->
            <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#mobileNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Mobile Nav -->
        <div class="collapse d-lg-none" id="mobileNav" style="padding-top: var(--space-4);">
            <a href="{% url 'community:index' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">홈</a>
            <a href="{% url 'community:games_index' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">게임</a>
            <a href="{% url 'community:guestbook_list' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">방명록</a>
            {% if user.is_authenticated %}
                <a href="{% url 'community:question_create' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">글쓰기</a>
                <a href="{% url 'community:profile' user.username %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">프로필</a>
                <a href="{% url 'common:logout' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">로그아웃</a>
            {% else %}
                <a href="{% url 'common:login' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">로그인</a>
                <a href="{% url 'common:signup' %}" style="display: block; padding: var(--space-3) 0; color: var(--text-secondary); text-decoration: none;">회원가입</a>
            {% endif %}
        </div>
    </div>
</nav>

<style>
body { padding-top: 80px; }
.dropdown:hover .dropdown-menu { display: block; }
</style>
